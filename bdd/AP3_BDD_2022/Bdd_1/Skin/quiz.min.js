var qAA=[];var qAB=[];var qABTab=[];var qAD=[];var qAE=[];var qAF=[];var qAG;var qAH;var qAI=[];var qAJ;var qAJTab=[];var qAL=[];var qAM;var qAN;var qAO;var qAP=[];var qAQ=[];var qAR=[];var qAS;var qAT;var qAU=6;var qAV=7;var qAW;var qAX;function showFeedback(qAW,qAX){var qAY=document.getElementById("f"+qAX.toString());var qAZ=qAY.dataset.formname;var qBA=JSON.parse(qAY.dataset.questionorder);var qBB=JSON.parse(qAY.dataset.questionid);var qBC=JSON.parse(qAY.dataset.questionnb);var qBD=[];for(qAT=0;qBC<qAT;qAT++){qBD[qAT]=0;}qAB[qAX]=0;qAF[qAX]=0;qAI[qAX]=0;qAL[qAX]=0;qABTab[qAX]=qBD;qAJTab[qAX]=qBD;var qAA=JSON.parse(qAY.dataset.proposalnb);var qAD=JSON.parse(qAY.dataset.questionidnextgood);var qAE=JSON.parse(qAY.dataset.questionidnextbad);var qBE=JSON.parse(qAY.dataset.formskill);var qBF=qBE.length;var qBG;for(qBG=0;qBG<qBF;qBG++){qAQ[qBG]=0;qAR[qBG]=0;}var qBH='';if(qBA==0){document.getElementById("quizForm_"+qAZ).suivante.disabled=true;qAL[qAX]=2;if(qBB==0){qAG=0;qAH=qBC;}else{qAG=qBB-1;qAH=qBB;}}else{if(qAL[qAX]==0){qAG=qBB-1;qAH=qBB;qAL[qAX]=1;qAI[qAX]=qBB;}else{qAG=qAI[qAX]-1;qAH=qAI[qAX];}qAF[qAX]=qAH;}answerFormCnt=0;feedbackQuestionNumber=0;for(qAT=qAG;qAT<qAH;qAT++){feedbackTitle=0;proposalNb=qAA[qAT];identForm=qAZ+'_q'+(qAT+1).toString();qAO=0;qAM=0;qAN=0;for(proposalId=1;proposalId <= proposalNb;proposalId++){var qBI=document.getElementById(identForm+'_p'+proposalId.toString());var qBJ=document.getElementById(identForm+'_p'+proposalId.toString()+"_0");var qBK=document.getElementById(identForm+'_p'+proposalId.toString()+"_1");var qBL=document.getElementById("ans_"+identForm+'_p'+ proposalId.toString());var qBM=identForm+'_p'+proposalId.toString();if(qBI.checked==1){chk=qCG(qBM+"True");qAO++;answerFormCnt++;}else{chk=qCG(qBM+"False");}if(chk==qBI.value){qBJ.style.display="none";if(chk==qCG(qBM+"True")){qBL.style.color="green";qBL.style.fontWeight="bold";qBK.style.color="green";qBK.style.display="block";}qAM=qAM+1;if(qBI.checked==1){feedbackText=JSON.parse(qBK.dataset.feedback);if(feedbackText!=''){if(feedbackTitle==0){if(feedbackQuestionNumber>0){qBH=qBH+'</br>';}qBH=qBH+'<b>Question n° '+(qAT+1).toString()+'</b></br>';feedbackTitle=1;feedbackQuestionNumber=feedbackQuestionNumber+1;}qBH=qBH+'-<span style="color: green;">'+feedbackText+'</span></br>';}}}else{qBK.style.display="none";if(chk==qCG(qBM+"True")){qBL.style.color="red";qBL.style.fontWeight="bold";qBJ.style.color="red";qBJ.style.display="block";}if(qBI.checked==1){qAN=qAN+1;feedbackText=JSON.parse(qBJ.dataset.feedback);if(feedbackText!=''){if(feedbackTitle==0){if(feedbackQuestionNumber>0){qBH=qBH+'</br>';}qBH=qBH+'<b>Question n° '+(qAT+1).toString()+'</b></br>';feedbackTitle=1;feedbackQuestionNumber=feedbackQuestionNumber+1;}qBH=qBH+'-<span style="color: red;">'+feedbackText+'</span></br>';}}}}if(qAM==proposalNb){updateScores(qAW,qAX,qAU,qBH);qABTab[qAX][qAT]=1;qAJTab[qAX][qAT]=1;qAJ=1;document.getElementById("fok_"+identForm).style.fontSize="medium";document.getElementById("fok_"+identForm).style.color="green";document.getElementById("fok_"+identForm).style.display="block";for(proposalId=1;proposalId <= proposalNb;proposalId++){var qBI=document.getElementById(identForm+'_p'+proposalId.toString());var qBK=document.getElementById(identForm+'_p'+proposalId.toString()+"_1");if(qBI.checked==0){qBK.style.display="block";qBK.style.color="blue";}}}else{updateScores(qAW,qAX,qAV,qBH);qAJ=0;document.getElementById("fok_"+identForm).style.display="None";}if(qAO==0){qABTab[qAX][qAT]=-1;document.getElementById("fpc_"+identForm).style.fontSize="medium";document.getElementById("fpc_"+identForm).style.color="orange";document.getElementById("fpc_"+identForm).style.display="block";}else{if(qAM>0 && qAM<proposalNb && qAN==0){qABTab[qAX][qAT]=-2;document.getElementById("fpc_"+identForm).style.fontSize="medium";document.getElementById("fpc_"+identForm).style.color="orange";document.getElementById("fpc_"+identForm).style.display="block";}else{document.getElementById("fpc_"+identForm).style.display="None";}}if(qAN==1){document.getElementById("fno_"+identForm).style.fontSize="medium";document.getElementById("fno_"+identForm).style.color="red";document.getElementById("fno_"+identForm).style.display="block";}if(qAN>1){document.getElementById("fat_"+identForm).style.fontSize="medium";document.getElementById("fat_"+identForm).style.color="red";document.getElementById("fat_"+identForm).style.display="block";for(proposalId=1;proposalId <= proposalNb;proposalId++){var qBJ=document.getElementById(identForm+'_p'+proposalId.toString()+"_0");var qBK=document.getElementById(identForm+'_p'+proposalId.toString()+"_1");var qBL=document.getElementById("ans_"+identForm+'_p'+ proposalId.toString());qBJ.style.display="None";qBK.style.display="None";qBL.style.color="black";qBL.style.fontWeight="normal";}}}if(answerFormCnt>0){switch (qBA){case 0:qAI[qAX]=qAF[qAX];break;case 1:if(qAF[qAX]<qBC)qAI[qAX]=qAF[qAX]+1;if(qAI[qAX]==qBC)qAL[qAX]=2;break;case 2:if(qAJ==1){qAI[qAX]=qAD[qAX][qAF[qAX]-1];}else{qAI[qAX]=qAE[qAX][qAF[qAX]-1];}if(qAI[qAX]==0)qAL[qAX]=2;break;case 3:questionAllDone=0;for(var qAT=0;qAT<qBC;qAT++){if(qAJTab[qAX][qAT]==1)questionAllDone++;}if(questionAllDone<(qBC-1)){while (qAF[qAX]==qAI[qAX] || qAJTab[qAX][qAI[qAX]-1]==1)qAI[qAX]=qBO(qBC)+1;}if(questionAllDone<qBC){while (qAJTab[qAX][qAI[qAX]-1]==1)qAI[qAX]=qBO(qBC)+1;}if(questionAllDone==qBC)qAL[qAX]=2;break;}}else{qAI[qAX]=qAF[qAX];}if(answerFormCnt>0){document.getElementById("quizForm_"+qAZ).valider.disabled=true;if(qAL[qAX]==1){document.getElementById("quizForm_"+qAZ).suivante.disabled=false;}if(qAL[qAX]==2){qAS=0;for(var qAT=qAG;qAT<qAH;qAT++){identForm=qAZ+'_q'+(qAT+1).toString();if(qABTab[qAX][qAT]==-1)document.getElementById("fpc_"+identForm).style.display="None";qBM='question_'+qAZ+'_q'+(qAT+1).toString();var qBN=document.getElementById(qBM);qAP=JSON.parse(qBN.dataset.questionskill);questionSkillNb=qAP.length;if(qABTab[qAX][qAT]==1){qAB[qAX]++;for(var skillCnt=0;skillCnt<questionSkillNb;skillCnt++){skillNum=qAP[skillCnt]-1;qAQ[skillNum]++;}}for(var skillCnt=0;skillCnt<questionSkillNb;skillCnt++){skillNum=qAP[skillCnt]-1;qAR[skillNum]++;qAS=Math.max(qAS,qAR[skillNum]);}}document.getElementById("gauge_f"+qAX).style.display="block";if(questionSkillNb>0)document.getElementById("radar_f"+qAX).style.display="block";chart_gauge(qAX,Math.round(qAB[qAX]/qBC*100));chart_radar(qAX,qBE,qAQ,qAR,qAS);}}}function showqAI(qAX){if(qAL[qAX]==1 || qAL[qAX]==2){document.getElementById("question_"+qAZ+"_q"+qAF[qAX].toString()).style.display="none";document.getElementById("question_"+qAZ+"_q"+qAI[qAX].toString()).style.display="block";document.getElementById("quizForm_"+qAZ).valider.disabled=false;}document.getElementById("quizForm_"+qAZ).suivante.disabled=true;}function qBO(max){return Math.floor(Math.random() * max);}var qBP=[];var qBQ=[];var qBR=[];var qBS=0;var qBT=0;var qBU=10;var qBV="Termin&eacute;!";function cd(qAW,qAX){var qAY=document.getElementById("f"+qAX.toString());var qAZ=qAY.dataset.formname;now1=new Date();diff1=qBP[qAX]-now1;diff1=new Date(diff1);var qBW=diff1.getSeconds();var qBX=diff1.getMinutes();var qBY=diff1.getHours()-1;if(qBX<10){qBX="0"+qBX;}if(qBW<10){qBW="0"+qBW;}qBQ[qAX]=document.getElementById("quizForm_"+qAZ).valider.disabled;if(now1 >= qBP[qAX] && qBQ[qAX]==false){clearTimeout(qBR[qAX]);showFeedback(qAW,qAX);document.getElementById("quizForm_"+qAZ).valider.disabled=true;qBQ[qAX]=true;document.getElementById("cdtime_"+qAZ).innerHTML=qBV;}else{document.getElementById("cdtime_"+qAZ).innerHTML=qBY+":"+qBX+":"+qBW;}if(qBQ[qAX]==false){qBR[qAX]=setTimeout("cd("+qAW+","+qAX+")",1000);}}function with_cd(qAW,qAX){var qAY=document.getElementById("f"+qAX.toString());var qBZ=JSON.parse(qAY.dataset.questiontime);qBU=qBZ;var qBC=JSON.parse(qAY.dataset.questionnb);time=getQuestionTime();qBU=time * qBC;var qAZ=qAY.dataset.formname;qBP[qAX]=new Date();qBP[qAX].setHours(qBP[qAX].getHours()+qBS);qBP[qAX].setMinutes(qBP[qAX].getMinutes()+qBT);qBP[qAX].setSeconds(qBP[qAX].getSeconds()+qBU);document.getElementById("quizForm_"+qAZ).with_startstop.disabled=true;document.getElementById("quizForm_"+qAZ).without_startstop.disabled=true;document.getElementById("goquiz_"+qAZ).style.display="block";document.getElementById("cdtime_"+qAZ).style.display="block";cd(qAW,qAX);}function without_cd(qAX){var qAY=document.getElementById("f"+qAX.toString());var qAZ=qAY.dataset.formname;document.getElementById("quizForm_"+qAZ).with_startstop.disabled=true;document.getElementById("quizForm_"+qAZ).without_startstop.disabled=true;document.getElementById("goquiz_"+qAZ).style.display="block";}function chart_gauge(qAX,value){var qAY=document.getElementById("f"+qAX.toString());var qAZ=qAY.dataset.formname;var qCA=document.getElementById("text_gauge_"+qAZ).getContext("2d");qCA.font="20px Arial";qCA.strokeText("Score : "+value,10,50);var qCB={angle: 0.15,lineWidth: 0.1,radiusScale: 0.8,pointer: {length: 0.6,strokeWidth: 0.035,color: "#000000"},limitMax: false,limitMin: false,colorStart: "#6FADCF",colorStop: "#00C000",strokeColor: "#C00000",generateGradient: true,highDpiSupport: true,};var qCC=document.getElementById("chart_gauge_"+qAZ);var qCD=new Gauge(qCC).setOptions(qCB);qCD.maxValue=100;qCD.setMinValue(0);qCD.animationSpeed=32;qCD.set(value);}function chart_radar(qAX,qBE,qAQ,qAR,qAS){var qAY=document.getElementById("f"+qAX.toString());var qAZ=qAY.dataset.formname;var qCE=[];var qCF=[];qCF[qAX]=document.getElementById("chart_radar_"+qAZ).getContext("2d");qCE[qAX]=new Chart(qCF[qAX],{type: "radar",data: {labels: qBE,datasets: [{label: "Acquis",data: qAQ,borderColor: "rgb(0,255,0)",},{label: "Maximum",data: qAR,borderColor: "rgb(255,0,0)",}]},options: {responsive: false,scales: {r:  {min: 0,max: qAS,ticks: {stepSize: 1}}}}});}var qCG=function qCG(ascii){function qCH(value,amount){return (value>>>amount) | (value<<(32-amount));};var qCI=Math.pow;var qCJ=qCI(2,32);var qCK='length';var qCL;var qCM;var qCN='';var qCO=[];var qCP=ascii[qCK]*8;var qCQ=qCG.h=qCG.h || [];var qCR=qCG.k=qCG.k || [];var qCS=qCR[qCK];var qCT={};for(var candidate=2;qCS<64;candidate++){if(!qCT[candidate]){for(qCL=0;qCL<313;qCL += candidate){qCT[qCL]=candidate;}qCQ[qCS]=(qCI(candidate,.5)*qCJ)|0;qCR[qCS++]=(qCI(candidate,1/3)*qCJ)|0;}}ascii += '\x80';while (ascii[qCK]%64-56) ascii += '\x00';for(qCL=0;qCL<ascii[qCK];qCL++){qCM=ascii.charCodeAt(qCL);if(qCM>>8) return;qCO[qCL>>2] |= qCM << ((3-qCL)%4)*8;}qCO[qCO[qCK]]=((qCP/qCJ)|0);qCO[qCO[qCK]]=(qCP);for(qCM=0;qCM<qCO[qCK];){var qCU=qCO.slice(qCM,qCM += 16);var qCV=qCQ;qCQ=qCQ.slice(0,8);for(qCL=0;qCL<64;qCL++){var qCW=qCL+qCM;var qCX=qCU[qCL-15];var qCY=qCU[qCL-2];var qCZ=qCQ[0];var qDA=qCQ[4];var qDB=qCQ[7]+ (qCH(qDA,6) ^ qCH(qDA,11) ^ qCH(qDA,25))+ ((qDA&qCQ[5])^((~qDA)&qCQ[6]))+ qCR[qCL]+ (qCU[qCL]=(qCL<16) ? qCU[qCL] : (qCU[qCL-16]+ (qCH(qCX,7) ^ qCH(qCX,18) ^ (qCX>>>3))+ qCU[qCL-7]+ (qCH(qCY,17) ^ qCH(qCY,19) ^ (qCY>>>10)))|0);var qDC=(qCH(qCZ,2) ^ qCH(qCZ,13) ^ qCH(qCZ,22))+ ((qCZ&qCQ[1])^(qCZ&qCQ[2])^(qCQ[1]&qCQ[2]));qCQ=[(qDB+qDC)|0].concat(qCQ);qCQ[4]=(qCQ[4]+qDB)|0;}for(qCL=0;qCL<8;qCL++){qCQ[qCL]=(qCQ[qCL]+qCV[qCL])|0;}}for(qCL=0;qCL<8;qCL++){for(qCM=3;qCM+1;qCM--){var qDD=(qCQ[qCL]>>(qCM*8))&255;qCN += ((qDD<16) ? 0 : '')+qDD.toString(16);}}return qCN;};var qDE=navigator.appName;var qDF=56;function showMe_text(x,y,w,title,text){var qDG=document.getElementById('popupmessage');if(!qDG){qDG=document.createElement('div');qDG.id='popupmessage';qDG.className="popupDiv";var qDH=(xpos+x+w>1740) ? Math.max(0,xpos-w-20) : xpos;qDG.style.cssText='position:absolute;left: ' +(x+qDH-50)+'px;top: '+ (y+ypos+20+qDF) +'px;width: '+w+'px;';qDG.innerHTML ='<img alt="Fermer" src="skin/icon_close_small.png" title="Fermer" onmousedown="Javascript:hideMe();"/><div class="popupDivLabel">'+title+'</div></br><a>'+text+'</a></br>';document.body.appendChild(qDG);}else{hideMe();}}function showMe_mp3(x,y,w,title,mp3){var qDG=document.getElementById('popupmessage');if(!qDG){qDG=document.createElement('div');qDG.id='popupmessage';qDG.className="popupDiv";var qDH=(xpos+x+w>1740) ? Math.max(0,xpos-w-20) : xpos;qDG.style.cssText='position:absolute;left: ' +(x+qDH-50)+'px;top: '+ (y+ypos+20+qDF) +'px;width: '+w+'px;';qDG.innerHTML ='<img alt="Fermer" src="skin/icon_close_small.png" title="Fermer" onmousedown="Javascript:hideMe();"/><div class="popupDivLabel">'+title+'</div></br><audio autoplay src="'+mp3+'"'+'type="audio/mpeg">non supporte</audio>';document.body.appendChild(qDG);}else{hideMe();}}function showMe_img(x,y,w,title,img ){var qDG=document.getElementById('popupmessage');if(!qDG){qDG=document.createElement('div');qDG.id='popupmessage';qDG.className="popupDiv";var qDH=(xpos+x+w>1740) ? Math.max(0,xpos-w-20) : xpos;qDG.style.cssText='position:absolute;left: ' +(x+qDH-50)+'px;top: '+ (y+ypos+20+qDF) +'px;width: '+w+'px;';qDG.innerHTML ='<img alt="Fermer" src="skin/icon_close_small.png" title="Fermer" onmousedown="Javascript:hideMe();"/><div class="popupDivLabel">'+title+'</div></br><img src="'+img+'" height="330"/>';document.body.appendChild(qDG);}else{hideMe();}}function showMe_mp3_img(x,y,w,title,mp3,img ){var qDG=document.getElementById('popupmessage');if(!qDG){qDG=document.createElement('div');qDG.id='popupmessage';qDG.className="popupDiv";var qDH=(xpos+x+w>1740) ? Math.max(0,xpos-w-20) : xpos;qDG.style.cssText='position:absolute;left: ' +(x+qDH-50)+'px;top: '+ (y+ypos+20+qDF) +'px;width: '+w+'px;';qDG.innerHTML ='<img alt="Fermer" src="skin/icon_close_small.png" title="Fermer" onmousedown="Javascript:hideMe();"/><div class="popupDivLabel">'+title+'</div></br><img src="'+img+'" height="330"/><audio autoplay src="'+mp3+'"'+'type="audio/mpeg">non supporte</audio>';document.body.appendChild(qDG);}else{hideMe();}}function showMe_text_img(x,y,w,title,text,img ){var qDG=document.getElementById('popupmessage');if(!qDG){qDG=document.createElement('div');qDG.id='popupmessage';qDG.className="popupDiv";var qDH=(xpos+x+w>1740) ? Math.max(0,xpos-w-20) : xpos;qDG.style.cssText='position:absolute;left: ' +(x+qDH-50)+'px;top: '+ (y+ypos+20+qDF) +'px;width: '+w+'px;';qDG.innerHTML ='<img alt="Fermer" src="skin/icon_close_small.png" title="Fermer" onmousedown="Javascript:hideMe();"/><div class="popupDivLabel">'+title+'</div></br><a>'+text+'</a><img src="'+img+'"/></br>';document.body.appendChild(qDG);}else{hideMe();}}function showMe_mp4(x,y,w,title,mp4 ){var qDG=document.getElementById('popupmessage');if(!qDG){qDG=document.createElement('div');qDG.id='popupmessage';qDG.className="popupDiv";var qDH=(xpos+x+w>1740) ? Math.max(0,xpos-w-20) : xpos;qDG.style.cssText='position:absolute;left: ' +(x+qDH-50)+'px;top: '+ (y+ypos+20+qDF) +'px;width: '+w+'px;';qDG.innerHTML ='<img alt="Fermer" src="skin/icon_close_small.png" title="Fermer" onmousedown="Javascript:hideMe();"/><div class="popupDivLabel">'+title+'</div></br><video autoplay src="'+mp4+'"'+'type="video/mp4" height="330">non supporte</video>';document.body.appendChild(qDG);}else{hideMe();}}function hideMe(){var qDG=document.getElementById('popupmessage');if(qDG){qDG.parentNode.removeChild(qDG);}}function updateCoords(e){if(qDE=="Microsoft Internet Explorer"){xpos=e.offsetX;ypos=e.offsetY;}else{xpos=e.pageX;ypos=e.pageY;}}