<html><head>
<!-- This document was created from RTF source by rtftohtml version 3.0.1 -->
<title>Programmation en C - 11.5.3. D&eacute;tection de la fin d'un fichier s&eacute;quentiel</title><link rel="Stylesheet" href="./site.css" type="text/css"></head>
<body>
<a href="prg-c145.htm"><img src="./leftg.gif" alt="Previous " border="0" width="30" height="30"></a>
 <a href="prg-c147.htm"><img src="./rightg.gif" alt="Next " border="0" width="30" height="30"></a>
 <a href="prg-c143.htm"><img src="./upg.gif" alt="Up " border="0" width="30" height="30"></a>
 <a href="prg-c.htm"><img src="./topg.gif" alt="Index " border="0" width="30" height="30"></a>
 <a href="prg-c_c.htm"><img src="./contg.gif" alt="Contents " border="0" width="30" height="30"></a>
<hr size="1" width="100%">
<h3>
11.5.3. D&eacute;tection de la fin d'un fichier s&eacute;quentiel</h3>
 <p>
 <p>
Lors de la fermeture d'un fichier ouvert en &eacute;criture, la fin du fichier
est marqu&eacute;e automatiquement par le symbole de fin de fichier <b>EOF</b>
<i>(End Of File).</i> Lors de la lecture d'un fichier, les fonctions
<tt><u>finfichier</u>(&lt;Nom&gt;)</tt> respectivement
<tt><b>feof(&lt;FP&gt;)</b></tt> nous permettent de d&eacute;tecter la fin du
fichier:<p>
<p>
<b><i>D&eacute;tection de la fin d'un fichier en langage algorithmique</i></b>

<pre>     <u>finfichier</u>( &lt;Nom&gt; )
</pre>
<tt><u>finfichier</u></tt>
retourne la valeur logique <tt><u>vrai</u></tt>, si la t&ecirc;te de lecture du
fichier r&eacute;f&eacute;renc&eacute; par &lt;Nom&gt; est arriv&eacute;e
&agrave; la fin du fichier; sinon la valeur logique du r&eacute;sultat est
<tt><u>faux</u></tt>.<p>
<b>&lt;Nom&gt;</b> est une cha&icirc;ne de caract&egrave;res constante ou une
variable de type cha&icirc;ne qui repr&eacute;sente le nom du fichier duquel on
veut lire.<p>
<tt></tt>
<p>
<p>
<b><i>D&eacute;tection de la fin d'un fichier en langage C - feof</i></b>

<pre><b>     feof( &lt;FP&gt; );
</b></pre>
<b>feof</b>
retourne une valeur diff&eacute;rente de z&eacute;ro, si la t&ecirc;te de
lecture du fichier r&eacute;f&eacute;renc&eacute; par &lt;FP&gt; est
arriv&eacute;e &agrave; la fin du fichier; sinon la valeur du r&eacute;sultat
est z&eacute;ro.<p>
<b>&lt;FP&gt;</b> est un pointeur du type <b>FILE*</b> qui est reli&eacute; au
nom du fichier &agrave; lire.<p>
<tt></tt>
<p>
<img src="attenti2.gif" alt="Attention!" align="right" width="18" height="67"><p>
Pour que la fonction <b>feof</b> d&eacute;tecte correctement la fin du fichier,
il faut qu'apr&egrave;s la lecture de la derni&egrave;re donn&eacute;e du
fichier, la t&ecirc;te de lecture arrive jusqu'&agrave; la position de la
marque <b>EOF</b>. Nous obtenons cet effet seulement si nous terminons aussi la
cha&icirc;ne de format de <b>fscanf </b>par un retour &agrave; la ligne '\n'
(ou par un autre signe d'espacement).<p>
<p>
<b><i>Exemple</i></b><p>
Une boucle de lecture typique pour lire les enregistrements d'un fichier
s&eacute;quentiel r&eacute;f&eacute;renc&eacute; par un pointeur FP peut avoir
la forme suivante:<p>


<pre><b>  while (!feof(FP))
     {
      fscanf(FP, &quot;%s\n ... \n&quot;, NOM, ... );
      . . .
     }</b></pre>
<p>
<b><i>Exemple</i></b><p>
Le programme suivant lit et affiche le fichier &quot;C:\AUTOEXEC.BAT&quot; en le
parcourant caract&egrave;re par caract&egrave;re:<p>


<pre><b>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
main()
{
 FILE *FP;
 FP = fopen(&quot;C:\\AUTOEXEC.BAT&quot;, &quot;r&quot;);
 if (!FP) 
    {
     printf(&quot;Impossible d'ouvrir le fichier\n&quot;);
     exit(-1);
    }
 while (!feof(FP))
     putchar(fgetc(FP));
 fclose(FP);
 return 0;
}</b></pre>
<p>
Dans une cha&icirc;ne de caract&egrave;res constante, il faut indiquer le
symbole <tt><b>'\'</b></tt> (back-slash) par <tt><b>'\\'</b></tt>, pour qu'il
ne soit pas confondu avec le d&eacute;but d'une s&eacute;quence
d'&eacute;chappement (p.ex: \n, \t, \a, ...).<p>
<p>
<p><hr size="1" width="100%">
<a href="prg-c145.htm"><img src="./leftg.gif" alt="Previous " border="0" width="30" height="30"></a>
 <a href="prg-c147.htm"><img src="./rightg.gif" alt="Next " border="0" width="30" height="30"></a>
 <a href="prg-c143.htm"><img src="./upg.gif" alt="Up " border="0" width="30" height="30"></a>
 <a href="prg-c.htm"><img src="./topg.gif" alt="Index " border="0" width="30" height="30"></a>
 <a href="prg-c_c.htm"><img src="./contg.gif" alt="Contents " border="0" width="30" height="30"></a>
<br><hr size="1" width="100%"><small><a href="prg-c04.htm">Feedback - Copyright &copy</a> 1993,1996,1997 <a href="prg-c02.htm">F.Faber</a></small><p></body></html>