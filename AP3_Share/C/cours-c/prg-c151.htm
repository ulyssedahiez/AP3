<html><head>
<!-- This document was created from RTF source by rtftohtml version 3.0.1 -->
<title>Programmation en C - 11.7.3. Modifier un enregistrement dans un fichier</title><link rel="Stylesheet" href="./site.css" type="text/css"></head>
<body>
<a href="prg-c150.htm"><img src="./leftg.gif" alt="Previous " border="0" width="30" height="30"></a>
 <a href="prg-c152.htm"><img src="./rightg.gif" alt="Next " border="0" width="30" height="30"></a>
 <a href="prg-c148.htm"><img src="./upg.gif" alt="Up " border="0" width="30" height="30"></a>
 <a href="prg-c.htm"><img src="./topg.gif" alt="Index " border="0" width="30" height="30"></a>
 <a href="prg-c_c.htm"><img src="./contg.gif" alt="Contents " border="0" width="30" height="30"></a>
<hr size="1" width="100%">
<h3>
11.7.3. Modifier un enregistrement dans un fichier</h3>
 <p>
 <p>
Le nouveau fichier est cr&eacute;&eacute; de tous les enregistrements de
l'ancien fichier qui pr&eacute;c&egrave;dent l'enregistrement &agrave;
modifier, de l'enregistrement modifi&eacute; et de tous les enregistrements qui
suivent l'enregistrement &agrave; modifier dans l'ancien fichier:<p>
<p>
<img src="prg-c82.gif" width="354" height="194"><p>
<p>
<p>
<center><b><i>Solution en C</i></b><p>
</center>

<pre><b>#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

main()
{
  /* D&eacute;clarations : */
  /* Noms des fichiers et pointeurs de r&eacute;f&eacute;rence */
  char ANCIEN[30], NOUVEAU[30]; 
  FILE *INFILE, *OUTFILE;
  /* Autres variables */
  char NOM_PERS[30], NOM_MODIF[30], NOM_NOUV[30];
  /* Ouverture de l'ancien fichier en lecture */
  do
    {
     printf(&quot;Nom de l'ancien fichier : &quot;);
     scanf(&quot;%s&quot;, ANCIEN);
     INFILE = fopen(ANCIEN, &quot;r&quot;); 
     if (!INFILE) 
         printf(&quot;\aERREUR: Impossible d'ouvrir &quot;
                &quot;le fichier: %s.\n&quot;, ANCIEN);
    }
  while (!INFILE);

  /* Ouverture du nouveau fichier en &eacute;criture */
  do
    {
     printf(&quot;Nom du nouveau fichier : &quot;);
     scanf(&quot;%s&quot;, NOUVEAU);
     OUTFILE = fopen(NOUVEAU, &quot;w&quot;); 
     if (!OUTFILE) 
         printf(&quot;\aERREUR: Impossible d'ouvrir &quot;
                &quot;le fichier: %s.\n&quot;, NOUVEAU);
    }
  while (!OUTFILE);
  /* Saisie de l'enregistrement &agrave; modifier,  */
  printf(&quot;Enregistrement &agrave; modifier : &quot;);
  scanf(&quot;%s&quot;,NOM_MODIF);
  /* et de sa nouvelle valeur. */
  printf(&quot;Enregistrement nouveau : &quot;);
  scanf(&quot;%s&quot;,NOM_NOUV);
  /* Traitement */
  /* Copie de tous les enregistrements en   */
  /* rempla&ccedil;ant l'enregistrement &agrave; modifier */
  /* par sa nouvelle valeur. */
  while (!feof(INFILE))
    {
     fscanf(INFILE, &quot;%s\n&quot;, NOM_PERS);
     if (strcmp(NOM_PERS, NOM_MODIF) == 0)
          fprintf(OUTFILE, &quot;%s\n&quot;, NOM_NOUV);
     else
          fprintf(OUTFILE, &quot;%s\n&quot;, NOM_PERS);
    }
  /* Fermeture des fichiers */
  fclose(OUTFILE);
  fclose(INFILE);
  return 0;
} </b></pre>
<p>
<p>
<p><hr size="1" width="100%">
<a href="prg-c150.htm"><img src="./leftg.gif" alt="Previous " border="0" width="30" height="30"></a>
 <a href="prg-c152.htm"><img src="./rightg.gif" alt="Next " border="0" width="30" height="30"></a>
 <a href="prg-c148.htm"><img src="./upg.gif" alt="Up " border="0" width="30" height="30"></a>
 <a href="prg-c.htm"><img src="./topg.gif" alt="Index " border="0" width="30" height="30"></a>
 <a href="prg-c_c.htm"><img src="./contg.gif" alt="Contents " border="0" width="30" height="30"></a>
<br><hr size="1" width="100%"><small><a href="prg-c04.htm">Feedback - Copyright &copy</a> 1993,1996,1997 <a href="prg-c02.htm">F.Faber</a></small><p></body></html>